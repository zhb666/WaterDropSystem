webpackJsonp([7],{L7f8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Wn42"),s=a.n(i),o={name:"charge",data:function(){return{userName:"",NewuserName:"",tableData:[],actiCodeMask:"",NewactiCodeMask:"",userIdMask:"",name:"",NewdialogFormVisible:!1,dialogFormVisible:!1,limit:"",Toexamine:!1,totalRecords:0,page:1,logins:!1,open_off:!1}},mounted:function(){this.sendCharge()},methods:{handleCurrentChange:function(e){var t=this;this.logins=!0;var a=this.ApiUrl+"/version/getversionlistbypage";this.$http({method:"post",url:a,data:s.a.stringify({pageNum:e,pageSize:10})}).then(function(e){0==e.data.code?(t.logins=!1,t.tableData=e.data.data.data,t.totalRecords=e.data.data.totalCount):("403"==e.data.error.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(e){console.log(e)})},sendCharge:function(e){var t=this;e&&(this.page=1),this.logins=!0;var a=this.ApiUrl+"/version/getversionlistbypage";this.$http({method:"post",url:a,data:s.a.stringify({pageNum:this.page,pageSize:10})}).then(function(e){0==e.data.code?(t.logins=!1,t.tableData=e.data.data.data,t.totalRecords=e.data.data.totalCount):("403"==e.data.error.code&&t.Signout(),t.$message.error(e.data.msg))}).catch(function(e){console.log(e)})},getUserId:function(e,t){this.dialogFormVisible=!0,this.userIdMask=t.id,this.actiCodeMask=t.version_number,this.userName=t.remark},sendAgent:function(){var e=this;if(""==this.actiCodeMask)return this.$message.error("错了哦，请输入版本号"),!1;if(""==this.userName)return this.$message.error("错了哦，请输入项目描述"),!1;var t=this.ApiUrl+"/version/updateversion";this.$http({method:"post",url:t,data:s.a.stringify({id:this.userIdMask,version_number:this.actiCodeMask,remark:this.userName})}).then(function(t){0==t.data.code?(e.$notify({title:"修改成功",message:"这是一条成功的提示消息",type:"success"}),e.showmARKs(),e.sendCharge()):("403"==t.data.error.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(e){console.log(e)})},showmARKs:function(){this.dialogFormVisible=!1,this.userName="",this.showNameBox=!1,this.showNameBoxTWO=!1},NewshowmARKs:function(){this.NewdialogFormVisible=!1,this.NewuserName="",this.NewactiCodeMask=""},newInfoFun:function(){this.NewdialogFormVisible=!0},newXinjian:function(){var e=this;if(""==this.NewactiCodeMask)return this.$message.error("错了哦，请输入版本号"),!1;if(""==this.NewuserName)return this.$message.error("错了哦，请输入项目描述"),!1;var t=this.ApiUrl+"/version/addversion";this.$http({method:"post",url:t,data:s.a.stringify({version_number:this.NewactiCodeMask,remark:this.NewuserName})}).then(function(t){0==t.data.code?(e.$notify({title:"新建成功",message:"这是一条成功的提示消息",type:"success"}),e.NewshowmARKs(),e.sendCharge()):("403"==t.data.error.code&&e.Signout(),e.$message.error(t.data.msg))}).catch(function(e){console.log(e)})}},watch:{}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"修改信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticStyle:{margin:"20px auto"}}),e._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版本号 : "}},[a("el-input",{attrs:{placeholder:"版本号"},model:{value:e.actiCodeMask,callback:function(t){e.actiCodeMask=t},expression:"actiCodeMask"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本描述 : "}},[a("el-input",{attrs:{placeholder:"版本描述"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:e.showmARKs}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendAgent()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{width:"1200px",margin:"0 auto"},attrs:{"show-close":!1,title:"新建",visible:e.NewdialogFormVisible},on:{"update:visible":function(t){e.NewdialogFormVisible=t}}},[a("div",{staticStyle:{margin:"20px auto"}}),e._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版本号 : "}},[a("el-input",{attrs:{placeholder:"版本号"},model:{value:e.NewactiCodeMask,callback:function(t){e.NewactiCodeMask=t},expression:"NewactiCodeMask"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本描述 : "}},[a("el-input",{attrs:{placeholder:"版本描述"},model:{value:e.NewuserName,callback:function(t){e.NewuserName=t},expression:"NewuserName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{slot:""},slot:"default"},[a("el-button",{on:{click:function(t){e.NewdialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.newXinjian()}}},[e._v("确定")])],1)],1),e._v(" "),a("div",{staticClass:"animated fadeInDown"},[a("el-row",{staticClass:"breadcrumb"},[a("el-col",{attrs:{span:4}},[a("h3",[e._v("版本管理")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("客户中心")]),e._v(" "),a("el-breadcrumb-item",[e._v("版本管理")])],1)],1)],1),e._v(" "),a("div",{staticClass:"addPadding"},[a("div",{staticClass:"user_header"},[a("el-button",{staticStyle:{float:"right","margin-right":"2%"},attrs:{type:"primary"},on:{click:e.newInfoFun}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"user_main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logins,expression:"logins"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(33, 33, 33, 0.8)"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version_number",label:"版本号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"版本描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"use_num",label:"使用用户数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"修改",placement:"right",effect:"light"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.getUserId(t.$index,t.row)}}},[e._v("修改\n                ")])],1)]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalRecords>10,expression:"totalRecords>10"}],staticClass:"pageBox"},[a("el-pagination",{attrs:{"current-page":e.page,"page-size":10,layout:"prev, pager, next, jumper",total:e.totalRecords},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)])],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(o,r,!1,function(e){a("sYGS")},"data-v-019f4954",null);t.default=n.exports},sYGS:function(e,t){}});